var mtlLoader = new THREE.MTLLoader();
mtlLoader.setPath('obj/');
mtlLoader.load('car.mtl', function (materials) {
    materials.preload();
    var objLoader = new THREE.OBJLoader();
    objLoader.setMaterials(materials);
    objLoader.setPath('obj/');
    objLoader.load('car.obj', function (object) {
        object.traverse(function (child) {
            if (child instanceof THREE.Mesh) {
                child.scale.set(0.3, 0.3, 0.3);
                child.rotation.set(Math.PI * 3 / 2, 0, 0);
            }
        });
        new ThreeCar().addCar(object, testTrace[0]);
    });
});

mtlLoader.load('car_bora.mtl', function (materials) {
    materials.preload();
    var objLoader = new THREE.OBJLoader();
    objLoader.setMaterials(materials);
    objLoader.setPath('obj/');
    objLoader.load('car_bora.obj', function (object) {
        object.traverse(function (child) {
            if (child instanceof THREE.Mesh) {
                child.scale.set(0.3, 0.3, 0.3);
                child.rotation.set(Math.PI * 3 / 2, 0, 0);
            }
        });
        new ThreeCar().addCar(object, testTrace[1]);
    });
});

// mtlLoader.load('car_kdlk03.mtl', function (materials) {
//     materials.preload();
//     var objLoader = new THREE.OBJLoader();
//     objLoader.setMaterials(materials);
//     objLoader.setPath('obj/');
//     objLoader.load('car_kdlk03.obj', function (object) {
//         object.traverse(function (child) {
//             if (child instanceof THREE.Mesh) {
//                 child.scale.set(0.3, 0.3, 0.3);
//                 child.rotation.set(Math.PI * 3 / 2, 0, 0);
//             }
//         });
//         new ThreeCar().addCar(object, testTrace[2]);
//     });
// });

// mtlLoader.load('car_saturn.mtl', function (materials) {
//     materials.preload();
//     var objLoader = new THREE.OBJLoader();
//     objLoader.setMaterials(materials);
//     objLoader.setPath('obj/');
//     objLoader.load('car_saturn.obj', function (object) {
//         object.traverse(function (child) {
//             if (child instanceof THREE.Mesh) {
//                 child.scale.set(0.3, 0.3, 0.3);
//                 child.rotation.set(Math.PI * 3 / 2, 0, 0);
//             }
//         });
//         // new ThreeCar().addCar(object, testTrace[3]);
//     });
// });

var ThreeCar = function () {
    ThreeCar.prototype.addCar = function (object, coords) {
        if (!coords || coords.length == 0) return;
        this._prepareData(coords);
        var v = threeLayer.coordinateToVector3(new maptalks.Coordinate(coords[0]));
        object.position.x = v.x;
        object.position.y = v.y;
        object.position.z = v.z;
        var scene = threeLayer.getScene();
        scene.add(object);
        var that = this;
        addToAnimationLoop(function () {
            var t = Date.now();
            var pa = that._getPositionAndAngle(t);
            object.position.x = pa.x;
            object.position.y = pa.y;
            object.position.z = pa.z;
            object.rotation.z = pa.angle;
        })
    }

    ThreeCar.prototype._prepareData = function (coords) {
        if (!coords) {
            return;
        }
        var data = [];
        var dataToDraw = [];
        var p1 = void 0,
            p2 = void 0,
            dis = 0,
            speed = 10;
        for (var i = 0, l = coords.length; i < l - 1; i++) {
            p1 = threeLayer.coordinateToVector3(new maptalks.Coordinate(coords[i]));
            p2 = threeLayer.coordinateToVector3(new maptalks.Coordinate(coords[i + 1]));
            dis += p1.distanceTo(p2) * speed;
            dataToDraw.push(dis);
            if (i == 0) {
                data.push(p1);
            }
            data.push(p2);
        }
        this._durations = dis;
        this._dataToDraw = dataToDraw;
        this._data = data;
    }

    ThreeCar.prototype._getPositionAndAngle = function (t) {
        if (!this._durations || !this._data || !this._dataToDraw) {
            return;
        }
        if (!this._startAnimaTime) {
            this._startAnimaTime = Date.now();
        }
        var eclapse = (t - this._startAnimaTime) % this._durations;
        var pos = {};
        for (var i = 0; i < this._dataToDraw.length; i++) {
            if (this._dataToDraw[i] > eclapse) {
                if (i == 0) {
                    pos.x = this._data[0].x + (this._data[1].x - this._data[0].x) * eclapse / this._dataToDraw[0];
                    pos.y = this._data[0].y + (this._data[1].y - this._data[0].y) * eclapse / this._dataToDraw[0];
                    pos.angle = Math.atan((this._data[1].y - this._data[0].y) / (this._data[1].x - this._data[0].x));
                } else {
                    var tmp1 = eclapse - this._dataToDraw[i - 1];
                    var tmp2 = this._dataToDraw[i] - this._dataToDraw[i - 1];
                    pos.x = this._data[i].x + (this._data[i + 1].x - this._data[i].x) * tmp1 / tmp2;
                    pos.y = this._data[i].y + (this._data[i + 1].y - this._data[i].y) * tmp1 / tmp2;
                    pos.angle = Math.atan((this._data[i + 1].y - this._data[i].y) / (this._data[i + 1].x - this._data[i].x));
                }
                break;
            }
        }
        if (this._data[i + 1].x - this._data[i].x > 0) {
            pos.angle += Math.PI;
        }
        pos.z = this._data[i].z;
        return pos;
    }
}

var testTrace = [
    // [
    //     [-73.9972585835011, 40.70879720997098],
    //     [-73.99755791715205, 40.70873011442356],
    //     [-73.99782800858355, 40.70866452909573],
    //     [-73.99807546502552, 40.70859066337269],
    //     [-73.9982903369413, 40.70851866751238],
    //     [-73.99849639695015, 40.70843004690934],
    //     [-73.99867458201743, 40.70835756136799],
    //     [-73.99887268069199, 40.70825232832178],
    //     [-73.99903998818723, 40.708176032306284],
    //     [-73.99912828418888, 40.70814281809456],
    //     [-73.99925360694499, 40.7081263707212],
    //     [-73.99935874152942, 40.70811818741842],
    //     [-73.99944727983637, 40.708110029094115],
    //     [-73.99950479414429, 40.708114109099114],
    //     [-73.99961802665297, 40.70813459841915],
    //     [-73.99972470740795, 40.70815939812539],
    //     [-73.9998641397321, 40.708218184395236],
    //     [-74.00000112863916, 40.708308868978946],
    //     [-74.00010115172671, 40.70842552338874],
    //     [-74.00017142402345, 40.70860536966924],
    //     [-74.00023131805551, 40.70879211100444],
    //     [-74.00055402247938, 40.70903076343379],
    //     [-74.00118970043309, 40.70952477416748],
    //     [-74.00186052603362, 40.71005896540865],
    //     [-74.00315689932171, 40.71108924338782],
    //     [-74.00443964244874, 40.712147224484994],
    //     [-74.00476955242328, 40.71238625411806],
    //     [-74.00478726041598, 40.71242943094117],
    //     [-74.0048679814746, 40.71248029181211],
    //     [-74.00451118939657, 40.712731162737015],
    //     [-74.00447581283754, 40.71269514097796],
    //     [-74.00430597868854, 40.71286696385502],
    //     [-74.00403886415984, 40.71314416226605],
    //     [-74.00362841269322, 40.7136539043581],
    //     [-74.0031701515253, 40.71472514829256],
    //     [-74.00301519770869, 40.7155996105852],
    //     [-74.00281438928278, 40.71588392561111],
    //     [-74.00256801794956, 40.71617376797778],
    //     [-74.00156590663335, 40.717297079317206],
    //     [-74.00054648605271, 40.71843379103902],
    //     [-73.99995853700415, 40.71801936315151],
    //     [-73.99930471527239, 40.717566200208836],
    //     [-73.99886792164625, 40.71723043977099],
    //     [-73.99860180332172, 40.717118182863686],
    //     [-73.99859076962287, 40.71710699273373],
    //     [-73.9993313886867, 40.715914725760314],
    //     [-73.9996429670665, 40.71517819935613],
    //     [-73.99959466675239, 40.71446341994678],
    //     [-73.99955008253596, 40.71393441608373],
    //     [-73.99868666253872, 40.7135371137139],
    //     [-73.99822535122638, 40.71324533767242],
    //     [-73.9981534249444, 40.71318124445233],
    //     [-73.9981070879262, 40.713144173195616],
    //     [-73.99780965353568, 40.71208210189431],
    //     [-73.99777069701975, 40.711982411611785],
    //     [-73.99685380371494, 40.712117175889006],
    //     [-73.99670795100803, 40.711498601192005],
    //     [-73.9966746014855, 40.71147906708299],
    //     [-73.9963490816142, 40.71022794620731],
    //     [-73.99635250688755, 40.710150118995074],
    //     [-73.9962151785403, 40.70972559368377],
    //     [-73.99611407221903, 40.70930050509887],
    //     [-73.99586274777761, 40.709317924040164],
    //     [-73.99586825905783, 40.70924423895676],
    //     [-73.99604954138039, 40.70920991852287],
    //     [-73.99602089884638, 40.70904982530189],
    //     [-73.99601012740021, 40.709004375933176],
    //     [-73.9972585835011, 40.70879720997098]
    // ],
    [
        [-74.0066, 40.70768, 10],
        [-74.00638, 40.70752, 21.829],
        [-74.00595, 40.7072, 45.211],
        [-74.00618, 40.7071, 53.564],
        [-74.00645, 40.70698, 63.424],
        [-74.0058, 40.70646, 94.523],
        [-74.00569, 40.70637, 99.85],
        [-74.005, 40.70685, 117.179],
        [-74.00406, 40.70745, 139.918],
        [-74.00344, 40.70807, 168.013],
        [-74.00258, 40.70878, 202.820],
        [-74.00161, 40.70952, 240.492],
        [-74.00124, 40.71, 260.567],
        [-74.00121, 40.71005, 262.551],
        [-74.00022, 40.70926, 277.696],
        [-74.00019, 40.70922, 278.335],
        [-73.99988, 40.70861, 286.358],
        [-73.99984, 40.70844, 288.477],
        [-73.99984, 40.70832, 289.950],
        [-73.9999, 40.70814, 292.228],
        [-74.00015, 40.70788, 296.177],
        [-74.00035, 40.70774, 298.709],
        [-74.00116, 40.70729, 308.052],
        [-74.00161, 40.707, 313.547],
        [-74.00318, 40.7061, 323.785],
        [-74.00703, 40.70364, 349.975],
        [-74.0084, 40.70281, 359.098],
        [-74.00903, 40.70242, 363.329],
        [-74.00945, 40.70217, 366.521],
        [-74.00973, 40.70204, 368.484],
        [-74.01003, 40.70195, 370.414],
        [-74.01196, 40.70151, 382.464],
        [-74.01281, 40.70133, 387.740],
        [-74.01348, 40.70125, 391.796],
        [-74.0138, 40.70124, 393.711],
        [-74.01436, 40.70133, 397.134],
        [-74.01469, 40.70143, 399.258],
        [-74.01497, 40.70156, 401.222],
        [-74.01524, 40.70173, 403.320],
        [-74.0154, 40.70191, 405.032],
        [-74.01549, 40.70206, 406.332],
        [-74.01647, 40.70406, 423.158],
        [-74.01657, 40.70435, 425.522],
        [-74.01662, 40.70463, 427.751],
        [-74.01663, 40.70478, 428.935],
        [-74.0166, 40.70501, 430.758],
        [-74.01658, 40.70508, 431.323],
        [-74.01623, 40.70597, 442.862],
        [-74.0161, 40.70636, 447.860],
        [-74.01601, 40.70656, 450.485],
        [-74.01595, 40.70667, 451.964],
        [-74.01588, 40.70684, 458.506],
        [-74.0158, 40.70705, 466.535],
        [-74.01565, 40.7071, 468.812],
        [-74.01551, 40.7071, 470.758],
        [-74.01538, 40.70708, 472.602],
        [-74.01522, 40.707, 475.267],
        [-74.01507, 40.70682, 479.171],
        [-74.01499, 40.70662, 483.003],
        [-74.01498, 40.70634, 488.139],
        [-74.015, 40.70616, 491.452],
        [-74.01511, 40.70573, 499.484],
        [-74.01524, 40.70535, 506.682],
        [-74.01526, 40.70529, 507.817],
        [-74.01555, 40.70451, 513.677],
        [-74.01564, 40.704, 517.398],
        [-74.01568, 40.7035, 521.020],
        [-74.01566, 40.7026, 527.529],
        [-74.01552, 40.70153, 535.304],
        [-74.01547, 40.70125, 537.347],
        [-74.0153, 40.70067, 541.644],
        [-74.0117, 40.69087, 615.206],
        [-74.01144, 40.69036, 619.159],
        [-74.01114, 40.6899, 622.870],
        [-74.00658, 40.68349, 675.535],
        [-74.00636, 40.68312, 678.470],
        [-74.006, 40.68224, 685.133],
        [-74.00581, 40.68188, 687.937],
        [-74.00575, 40.68178, 688.731],
        [-74.00552, 40.68139, 692.374],
        [-74.00534, 40.68095, 703.839],
        [-74.00496, 40.68046, 717.987],
        [-74.00469, 40.6802, 726.224],
        [-74.00446, 40.6801, 731.228],
        [-74.00303, 40.67853, 744.178],
        [-74.00275, 40.67819, 746.898],
        [-74.00216, 40.67738, 753.179],
        [-74.00159, 40.67651, 759.772],
        [-74.00083, 40.6753, 768.868],
        [-73.99657, 40.66832, 816.221],
        [-73.99639, 40.66795, 818.65],
        [-73.99621, 40.66761, 821.864],
        [-73.99616, 40.66746, 823.221],
        [-73.99609, 40.6673, 824.700],
        [-73.99599, 40.66717, 826.020],
        [-73.99586, 40.66705, 827.383],
        [-73.99572, 40.66694, 828.724],
        [-73.9945, 40.6662, 839.118],
        [-73.9942, 40.66601, 841.719],
        [-73.99097, 40.6641, 863.403],
        [-73.99025, 40.66366, 868.298],
        [-73.9898, 40.66335, 871.517],
        [-73.98956, 40.66315, 873.405],
        [-73.98909, 40.66272, 877.303],
        [-73.98894, 40.66256, 878.674],
        [-73.98858, 40.66211, 882.348],
        [-73.98718, 40.66013, 898.031],
        [-73.98686, 40.65978, 901.004],
        [-73.98645, 40.65941, 904.378],
        [-73.98609, 40.65913, 907.108],
        [-73.9856, 40.65882, 910.486],
        [-73.9806, 40.65581, 944.285],
        [-73.97912, 40.6549, 954.373],
        [-73.97863, 40.65453, 958.034],
        [-73.97822, 40.65415, 961.462],
        [-73.97778, 40.65363, 965.775],
        [-73.97747, 40.65316, 969.443],
        [-73.97731, 40.65287, 971.637],
        [-73.97707, 40.65246, 983.425],
        [-73.97565, 40.64985, 1057.620],
        [-73.97548, 40.6495, 1067.421],
        [-73.97529, 40.64895, 1082.362],
        [-73.97515, 40.64842, 1096.565],
        [-73.97489, 40.64705, 1132.935],
        [-73.97473, 40.64608, 1158.622],
        [-73.97476, 40.64595, 1164.015],
        [-73.97472, 40.64538, 1187.336],
        [-73.97473, 40.64518, 1195.513],
        [-73.97465, 40.64481, 1210.833],
        [-73.97436, 40.64327, 1237.545],
        [-73.97426, 40.64328, 1238.891],
        [-73.97409, 40.6433, 1241.187],
        [-73.97374, 40.64148, 1288.362],
        [-73.97364, 40.64091, 1303.111],
        [-73.97335, 40.64094, 1307.699],
        [-73.97226, 40.64106, 1324.966],
        [-73.97181, 40.63867, 1391.747],
        [-73.97136, 40.63628, 1458.527],
        [-73.96935, 40.6365, 1524.467],
        [-73.96803, 40.63665, 1567.804],
        [-73.96776, 40.63567, 1591.244],
        [-73.96763, 40.63523, 1601.802],
        [-73.96716, 40.63543, 1615.757],
        [-73.96096, 40.63836, 1804.918]
    ],
    [
        [-74.00625, 40.70845, 661],
        [-74.00653, 40.70822, 670.571],
        [-74.00602, 40.7079, 689.185],
        [-74.00548, 40.70738, 713.730],
        [-74.005, 40.70685, 737.574],
        [-74.00406, 40.70745, 757.914],
        [-74.00344, 40.70807, 771.807],
        [-74.0028, 40.7086, 784.639],
        [-74.00165, 40.70949, 806.886],
        [-74.00157, 40.70956, 808.540],
        [-74.00154, 40.7096, 809.362],
        [-74.00137, 40.70964, 810.593],
        [-74.00116, 40.70966, 812.056],
        [-74.00103, 40.70964, 812.973],
        [-74.0009, 40.70958, 814.025],
        [-74.00046, 40.70922, 818.501],
        [-74.00035, 40.70909, 819.910],
        [-74.00028, 40.70896, 821.190],
        [-74.00015, 40.70852, 825.303],
        [-74.00003, 40.70833, 827.224],
        [-73.99981, 40.70819, 829.210],
        [-73.9997, 40.70814, 830.097],
        [-73.99944, 40.7081, 831.931],
        [-73.99915, 40.70813, 833.955],
        [-73.99905, 40.70816, 834.698],
        [-73.99847, 40.70843, 839.404],
        [-73.99809, 40.70857, 842.325],
        [-73.99736, 40.70877, 847.691],
        [-73.99678, 40.70888, 851.825],
        [-73.99531, 40.70909, 862.167],
        [-73.99398, 40.70931, 871.578],
        [-73.99329, 40.7094, 875.368],
        [-73.98939, 40.70997, 896.868],
        [-73.98524, 40.71045, 919.592],
        [-73.98352, 40.7106, 928.963],
        [-73.98052, 40.71082, 945.278],
        [-73.98014, 40.71086, 947.355],
        [-73.97976, 40.71095, 949.510],
        [-73.97931, 40.71108, 952.116],
        [-73.9787, 40.71137, 956.014],
        [-73.97852, 40.7115, 957.360],
        [-73.97821, 40.71174, 959.758],
        [-73.9779, 40.71208, 962.710],
        [-73.97772, 40.71231, 964.619],
        [-73.97614, 40.71531, 987.686],
        [-73.97553, 40.71658, 997.337],
        [-73.9752, 40.71736, 1003.187],
        [-73.97503, 40.71801, 1007.919],
        [-73.97496, 40.71834, 1010.305],
        [-73.97485, 40.71905, 1015.410],
        [-73.97458, 40.72127, 1031.330],
        [-73.97444, 40.72204, 1036.881],
        [-73.97433, 40.72236, 1039.242],
        [-73.97408, 40.72284, 1042.927],
        [-73.97242, 40.7255, 1063.940],
        [-73.97226, 40.72579, 1066.184],
        [-73.97198, 40.72641, 1070.864],
        [-73.97187, 40.7268, 1073.712],
        [-73.97166, 40.72829, 1084.412],
        [-73.97166, 40.72863, 1086.840],
        [-73.9717, 40.72893, 1088.993],
        [-73.97178, 40.72916, 1090.692],
        [-73.9719, 40.72942, 1092.659],
        [-73.97206, 40.72969, 1094.772],
        [-73.97228, 40.72994, 1096.918],
        [-73.9725, 40.73015, 1098.833],
        [-73.97324, 40.73077, 1104.802],
        [-73.97354, 40.73111, 1107.723],
        [-73.97368, 40.73131, 1109.340],
        [-73.97379, 40.73151, 1110.887],
        [-73.97387, 40.7317, 1112.311],
        [-73.97394, 40.73193, 1113.997],
        [-73.97478, 40.73518, 1137.646],
        [-73.97487, 40.73554, 1140.262],
        [-73.97491, 40.73586, 1142.557],
        [-73.97489, 40.73625, 1145.344],
        [-73.97478, 40.73664, 1148.192],
        [-73.97454, 40.73713, 1151.925],
        [-73.97436, 40.73741, 1154.149],
        [-73.97335, 40.73877, 1165.292],
        [-73.97321, 40.73902, 1167.232],
        [-73.97305, 40.73942, 1170.216],
        [-73.97278, 40.7403, 1176.668],
        [-73.97226, 40.74249, 1192.558],
        [-73.97213, 40.74284, 1195.154],
        [-73.9719, 40.7433, 1198.667],
        [-73.97107, 40.74459, 1208.915],
        [-73.97068, 40.74513, 1213.310],
        [-73.9705, 40.74535, 1215.159],
        [-73.97018, 40.7457, 1218.199],
        [-73.96978, 40.74608, 1221.670],
        [-73.9692, 40.7466, 1226.531],
        [-73.9689, 40.74692, 1229.334],
        [-73.96593, 40.75048, 1259.408],
        [-73.96499, 40.75156, 1268.646],
        [-73.96358, 40.75306, 1281.795],
        [-73.96302, 40.75378, 1287.763],
        [-73.96204, 40.75489, 1297.299],
        [-73.96176, 40.75515, 1299.695],
        [-73.96155, 40.7553, 1301.256],
        [-73.9611, 40.75568, 1304.901],
        [-73.96063, 40.75613, 1308.999],
        [-73.9604, 40.75638, 1311.175],
        [-73.9591, 40.75803, 1324.896],
        [-73.95838, 40.75902, 1332.968],
        [-73.95798, 40.75952, 1337.142],
        [-73.95786, 40.75964, 1338.217],
        [-73.95744, 40.75997, 1341.491],
        [-73.95654, 40.7606, 1348.119],
        [-73.95601, 40.76101, 1352.217],
        [-73.95437, 40.76248, 1365.960],
        [-73.95405, 40.76282, 1368.942],
        [-73.95085, 40.76639, 1399.755],
        [-73.95043, 40.76696, 1404.416],
        [-73.94959, 40.76791, 1412.580],
        [-73.94917, 40.76848, 1417.242],
        [-73.9489, 40.7688, 1419.954],
        [-73.94824, 40.76952, 1426.213],
        [-73.94791, 40.76987, 1429.284],
        [-73.94759, 40.77018, 1432.094],
        [-73.94657, 40.77127, 1441.634],
        [-73.94582, 40.77188, 1447.586],
        [-73.94562, 40.77201, 1449.011],
        [-73.94506, 40.77246, 1453.427],
        [-73.94467, 40.77282, 1456.752],
        [-73.94332, 40.7743, 1469.597],
        [-73.94287, 40.77486, 1474.278],
        [-73.94269, 40.77517, 1476.696],
        [-73.94261, 40.77535, 1478.052],
        [-73.94248, 40.77576, 1481.063],
        [-73.94245, 40.77592, 1482.217],
        [-73.94243, 40.77616, 1483.935],
        [-73.94249, 40.77678, 1488.374],
        [-73.94266, 40.77738, 1492.756],
        [-73.94294, 40.77819, 1498.735],
        [-73.94366, 40.77976, 1510.603],
        [-73.94376, 40.78002, 1512.537],
        [-73.94401, 40.78091, 1519.035],
        [-73.94412, 40.7815, 1523.289],
        [-73.94413, 40.78193, 1526.361],
        [-73.94405, 40.78237, 1529.532],
        [-73.94397, 40.78258, 1531.093],
        [-73.94378, 40.78295, 1533.928],
        [-73.9435, 40.78333, 1537.035],
        [-73.94336, 40.78347, 1538.289],
        [-73.94321, 40.78361, 1539.577],
        [-73.94286, 40.78387, 1542.228],
        [-73.94209, 40.78429, 1547.359],
        [-73.9404, 40.78514, 1558.329],
        [-73.94011, 40.78532, 1560.356],
        [-73.93973, 40.78565, 1563.483],
        [-73.93833, 40.78723, 1577.069],
        [-73.93813, 40.78752, 1579.406],
        [-73.9379, 40.78798, 1582.918],
        [-73.93726, 40.78942, 1593.767],
        [-73.93706, 40.78975, 1596.360],
        [-73.93616, 40.79092, 1606.029],
        [-73.9359, 40.79121, 1608.532],
        [-73.9356, 40.79149, 1611.106],
        [-73.9351, 40.79187, 1614.936],
        [-73.9338, 40.79275, 1624.364],
        [-73.93306, 40.7932, 1629.496],
        [-73.93059, 40.79455, 1645.965],
        [-73.93025, 40.7948, 1648.527],
        [-73.92997, 40.7951, 1651.151],
        [-73.92964, 40.79557, 1654.951],
        [-73.92947, 40.7959, 1657.481],
        [-73.9293, 40.79643, 1661.376],
        [-73.92917, 40.79715, 1666.565],
        [-73.92914, 40.79741, 1668.429],
        [-73.92907, 40.7988, 1678.366],
        [-73.92909, 40.79913, 1680.726],
        [-73.92912, 40.7993, 1681.951],
        [-73.92924, 40.79962, 1684.328],
        [-73.92954, 40.80025, 1689.112],
        [-73.92972, 40.80066, 1692.198],
        [-73.93002, 40.80166, 1699.524],
        [-73.93022, 40.80271, 1707.103],
        [-73.9303, 40.80292, 1708.665],
        [-73.9305, 40.80334, 1711.854],
        [-73.93066, 40.8036, 1713.903],
        [-73.93145, 40.80467, 1722.660],
        [-73.93355, 40.80697, 1742.633],
        [-73.93393, 40.80744, 1746.570],
        [-73.93419, 40.80785, 1749.819],
        [-73.93435, 40.80812, 1751.933],
        [-73.93454, 40.80853, 1755.037],
        [-73.93482, 40.80923, 1760.262],
        [-73.93491, 40.8096, 1762.950],
        [-73.93487, 40.80993, 1769.984],
        [-73.93461, 40.81117, 1796.634],
        [-73.93462, 40.81131, 1799.610],
        [-73.93473, 40.81149, 1803.820]
    ],
   
]

// var arr = [];
// map.addEventListener('click', function (e) {
//     arr.push([e.coordinate.x, e.coordinate.y]);
// })